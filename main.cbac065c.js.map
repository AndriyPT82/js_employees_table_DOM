{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","thead","tbody","button","createElement","innerText","type","form","classList","add","append","currentCell","prevRow","titelsForLabels","trim","split","cities","validator","nameField","ageField","minAge","isValidAge","isValidName","length","maxAge","addNewEmployee","fields","newTableRow","forEach","field","newTableData","name","Intl","NumberFormat","format","value","appendChild","showMessage","title","description","massageContainer","h2","p","setAttribute","setTimeout","removeChild","label","includes","select","toLowerCase","citie","option","input","addEventListener","e","index","A","B","target","cellIndex","cellName","children","sort","a","b","cells","parseFloat","slice","localeCompare","element","undefined","ev","remove","parentNode","rowIndex","inputName","elements","age","isValid","message","inputFields","newRow","filter","inputField","choseCell","cellText","className","focus","btn","code"],"mappings":"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","file":"main.cbac065c.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\n\nconst button = document.createElement('button');\n\nbutton.innerText = 'Save to table';\nbutton.type = 'button';\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nbody.append(form);\n\nconst titelsForLabels = thead.innerText.trim().split(/\\s+/);\nconst cities = [\n  'Tokyo', 'Singapore', 'London', 'New York', 'Edinburgh', 'San Francisco',\n];\n\n(function() {\n  titelsForLabels.forEach(title => {\n    const label = document.createElement('label');\n\n    label.innerText = title + ':';\n\n    const value = ['Age', 'Salary'].includes(title)\n      ? 'number'\n      : 'text';\n\n    if (title === 'Office') {\n      const select = document.createElement('select');\n\n      select.name = title.toLowerCase();\n      select.setAttribute('data-qa', title.toLowerCase());\n\n      cities.forEach(citie => {\n        const option = document.createElement('option');\n\n        option.innerText = citie;\n        select.append(option);\n        label.append(select);\n      });\n\n      form.append(label);\n\n      return;\n    };\n\n    const input = document.createElement('input');\n\n    input.name = title.toLowerCase();\n    input.setAttribute('type', value);\n    input.setAttribute('data-qa', title.toLowerCase());\n\n    label.append(input);\n    form.append(label);\n    form.append(button);\n  });\n})();\n\nlet currentCell;\n\nthead.addEventListener('click', (e) => {\n  const index = e.target.cellIndex;\n  const cellName = e.target.innerText;\n  let A, B;\n\n  [...tbody.children].sort((a, b) => {\n    if (['Age', 'Salary'].includes(cellName)) {\n      [A, B] = cellName === 'Age'\n        ? [\n          +a.cells[index].innerText,\n          +b.cells[index].innerText,\n        ]\n        : [\n          parseFloat(a.cells[index].innerText.slice(1)),\n          parseFloat(b.cells[index].innerText.slice(1)),\n        ];\n\n      return currentCell === cellName\n        ? B - A\n        : A - B;\n    };\n    A = a.cells[index].innerText;\n    B = b.cells[index].innerText;\n\n    return currentCell === cellName\n      ? B.localeCompare(A)\n      : A.localeCompare(B);\n  }).forEach(element => {\n    tbody.append(element);\n  });\n\n  currentCell = currentCell === cellName\n    ? undefined\n    : cellName;\n});\n\nlet prevRow;\n\ntbody.addEventListener('click', (ev) => {\n  if (prevRow) {\n    tbody.children[prevRow - 1].classList.remove('active');\n  };\n  prevRow = ev.target.parentNode.rowIndex;\n  ev.target.parentNode.classList.add('active');\n});\n\nbutton.addEventListener('click', () => {\n  const inputName = form.elements.name.value;\n  const inputAge = +form.elements.age.value;\n\n  const [isValid, message] = validator(inputName, inputAge);\n\n  if (!isValid) {\n    showMessage('ERROR', message, 'error');\n\n    return;\n  }\n\n  showMessage('SUCCESS', message, 'success');\n\n  const inputFields = [...form.elements].filter(inputField => {\n    return inputField.name;\n  });\n\n  const newRow = addNewEmployee(inputFields);\n\n  tbody.append(newRow);\n});\n\ntbody.addEventListener('dblclick', (e) => {\n  const choseCell = e.target;\n  const cellText = choseCell.innerText;\n  const input = document.createElement('input');\n\n  input.className = 'cell-input';\n  input.value = cellText;\n\n  choseCell.innerText = '';\n  choseCell.append(input);\n\n  input.focus();\n\n  input.addEventListener('keydown', (btn) => {\n    if (btn.code === 'Enter') {\n      choseCell.innerText = input.value || cellText;\n    }\n  });\n\n  input.addEventListener('blur', () => {\n    choseCell.innerText = input.value || cellText;\n  });\n});\n\nfunction validator(nameField, ageField) {\n  const [minAge, maxAge] = [18, 90];\n  const isValidAge = (ageField >= 18 && ageField <= 90);\n  const isValidName = (nameField.length >= 4);\n  let message;\n\n  if (isValidName && isValidAge) {\n    message = 'Employee is successfully added to the table';\n\n    return [true, message];\n  }\n\n  message = !isValidName\n    ? 'The name must contain no less than 4 letters'\n    : `The age must be more than ${minAge} and less than ${maxAge} year`;\n\n  return [false, message];\n}\n\nfunction addNewEmployee(fields) {\n  const newTableRow = document.createElement('tr');\n\n  fields.forEach(field => {\n    const newTableData = document.createElement('td');\n\n    newTableData.innerText = field.name === 'salary'\n      ? '$' + new Intl.NumberFormat('en-US').format(field.value)\n      : field.value;\n\n    field.value = '';\n    newTableRow.appendChild(newTableData);\n  });\n\n  return newTableRow;\n};\n\nfunction showMessage(title, description, type) {\n  const massageContainer = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  massageContainer.setAttribute('data-qa', 'notification');\n  massageContainer.classList.add('notification', type);\n\n  h2.classList.add('title');\n  h2.innerText = title;\n  p.innerText = description;\n\n  massageContainer.append(h2, p);\n  body.append(massageContainer);\n\n  setTimeout(() => {\n    body.removeChild(massageContainer);\n  }, 4000);\n};\n"]}